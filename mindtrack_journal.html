
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MindTrack - Journal App</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    textarea {
      width: 100%;
      height: 100px;
      margin-bottom: 10px;
      font-size: 16px;
    }
    button {
      margin-right: 10px;
      padding: 6px 12px;
      font-size: 14px;
    }
    ul {
      list-style-type: none;
      padding: 0;
    }
    li {
      margin-bottom: 20px;
      border-bottom: 1px solid #ccc;
      padding-bottom: 10px;
    }
    #editSection {
      background: #f0f0f0;
      padding: 10px;
      margin-top: 20px;
    }
  </style>
</head>
<body>

<h1>MindTrack - Journal</h1>

<h2>Write a New Entry</h2>
<textarea id="journalInput" placeholder="Write your thoughts..."></textarea>
<p>Word Count: <span id="wordCount">0</span></p>
<button onclick="saveEntry()">Save Entry</button>
<p id="saveMessage"></p>

<h2>My Journal Entries</h2>
<ul id="entryList"></ul>

<div id="editSection" style="display:none;">
  <h3>Edit Entry</h3>
  <textarea id="editInput"></textarea>
  <button onclick="saveEdit()">Save Changes</button>
  <button onclick="cancelEdit()">Cancel</button>
</div>

<script>
function countWords(text) {
  return text.trim().split(/\s+/).filter(word => word.length > 0).length;
}

function saveEntry() {
  const entry = document.getElementById("journalInput").value;
  const entries = JSON.parse(localStorage.getItem("entries") || "[]");
  const newEntry = {
    id: Date.now(),
    text: entry,
    timestamp: new Date().toISOString()
  };
  entries.push(newEntry);
  localStorage.setItem("entries", JSON.stringify(entries));
  document.getElementById("saveMessage").innerText = "Entry Saved!";
  document.getElementById("journalInput").value = "";
  document.getElementById("wordCount").innerText = 0;
  renderEntries();
}

document.getElementById("journalInput").addEventListener("input", function () {
  const wordCount = countWords(this.value);
  document.getElementById("wordCount").innerText = wordCount;
});

function renderEntries() {
  const entries = JSON.parse(localStorage.getItem("entries") || "[]");
  const list = document.getElementById("entryList");
  list.innerHTML = "";
  entries.forEach(entry => {
    const li = document.createElement("li");
    li.innerHTML = `
      <div>
        <p>${entry.text}</p>
        <small>${new Date(entry.timestamp).toLocaleString()}</small><br>
        <button onclick="editEntry(${entry.id})">Edit</button>
        <button onclick="deleteEntry(${entry.id})">Delete</button>
      </div>
    `;
    list.appendChild(li);
  });
}

function deleteEntry(id) {
  if (!confirm("Are you sure you want to delete this entry? This action cannot be undone.")) return;
  let entries = JSON.parse(localStorage.getItem("entries") || "[]");
  entries = entries.filter(entry => entry.id !== id);
  localStorage.setItem("entries", JSON.stringify(entries));
  renderEntries();
}

let editingId = null;

function editEntry(id) {
  const entries = JSON.parse(localStorage.getItem("entries") || "[]");
  const entry = entries.find(e => e.id === id);
  if (!entry) return;
  editingId = id;
  document.getElementById("editInput").value = entry.text;
  document.getElementById("editSection").style.display = "block";
}

function saveEdit() {
  const updatedText = document.getElementById("editInput").value;
  let entries = JSON.parse(localStorage.getItem("entries") || "[]");
  const entry = entries.find(e => e.id === editingId);
  if (entry) {
    entry.text = updatedText;
    entry.timestamp = new Date().toISOString();
  }
  localStorage.setItem("entries", JSON.stringify(entries));
  editingId = null;
  document.getElementById("editSection").style.display = "none";
  renderEntries();
}

function cancelEdit() {
  editingId = null;
  document.getElementById("editSection").style.display = "none";
}

window.onload = renderEntries;
</script>

</body>
</html>
